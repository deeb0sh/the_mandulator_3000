import{i as h,_ as g,c as w,e as i,a as o,b as a,w as f,r as n,f as v,j as k,o as l}from"./index-DsuprYqt.js";import{_ as B}from"./logozbs-BIZfnIXH.js";async function y(){return(await(await h.load()).get()).visitorId}const C="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqUlEQVR4nO2Zy04UURCGPyfORnCJK8WNN3SnrLytFVYKT4GsjMGM4QE0iBuNlyCuEDcoIMa9opHgG0D0DdwKLLTNSWqSsnLOTI9d7cyi/6STmZ46f1V11+2cgQoVKlSo0GM4CowCk8BtucLnEWCQHsUZYBb4DmRtrm/ADDBED+AUsAr8zmG4vcKaZeBkNwyvAdPAXsSwn8AHYAF4INeC3NuJyO8CDeH8L+gD3kcMWQGuy++t1o4BbyPr19qsdTP+s1H8BTj/D1wXgA3D9alMJ2qRJ/8I2F+Asw48jryJUsJp2ii66ch9y3CHnHDFCUm2poKH3gr4+03seVenVRPzRcKmVThtKj2vPZuUrvOphD0EDOfgGxbZGC4pPb+8mt19UypjCAb9EJm5RBLW5LdMZAcSXGtK3z0PB/R4cC0hc84k4bxxoib3tMzZBNeYktkuavyg6bCtavRcwomY8UE2hX7TsQ8XcWBUEYVRoBVihs4n7rWr8x+V/NUiDkwqopc55GNOdGp8wKJaM0EB3FFEYQTOg32R7tqJ8bZwNLwcCKR5HXgSceBFBw7Mejlwo0sh9MorhLqVxOteSazL6I6UuLLL6EEzdxUqo8getkkWNixlN7JxJbOFA2YUYdhJlT1KvFP67no4cNoMcxcTcgMtnqp9WynjL5thLhwauGBZEW/I6OuNOvBV6VnyJD9uEus5/niq+HfLOG5pmCQM20AvTBnu8N0dNTOrZ9Jxi4RTHXhmOFekm5eCA3L0oRVuyk6qU4SE1TGfyRQadJSKvsibaJbY8TbNrl9kdKnM1JMv3XgdTg2T2Lpjr8vs1DxaXJR7KfmpMsOm3XHLG6nZWYdXWBNK5TF6AEOyAd/OYfiWdFi3JuWNIzJBTqg/OMLnKx6DWYUKFSpUwBN/ADytcW875BNbAAAAAElFTkSuQmCC",D={name:"m3000",data(){return{token:null,isValidating:!0,username:null,roleID:null,inCode:null}},async mounted(){document.documentElement.style.overflow="auto",await this.sessionValid()},methods:{checkRole3(e){return e===3},checkRole2(e){return e===2},checkRole1(e){return e===1},checkRole0(e){return e===0},async sessionValid(){try{const e=localStorage.getItem("jwt");if(!e){this.$router.push("/");return}const t=await y();if((await(await fetch("/auth/login",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`,"X-Fingerprint":t}})).json()).message==="valid"){this.token=e,this.isValidating=!1;const s=k(e);this.username=s.user,this.roleID=s.role}else localStorage.removeItem("jwt"),this.$router.replace("/")}catch{this.$router.replace("/")}},async logOut(){confirm("Вы уверены, что хотите выйти?")&&(await new Promise(e=>setTimeout(e,100)),localStorage.clear(),this.$router.replace("/"),await this.$router.replace("/"))}}},N={key:0,class:"main"},R={class:"header"},T={class:"nav"},_={class:"nav"},E={class:"container"};function L(e,t,c,u,s,r){const d=n("RouterLink"),m=n("profile"),A=n("invite"),p=n("WG");return s.isValidating===!1?(l(),w("div",N,[o("div",R,[o("div",T,[a(d,{to:"/"},{default:f(()=>t[1]||(t[1]=[o("img",{class:"logo",src:B,width:"80"},null,-1)])),_:1}),t[2]||(t[2]=o("span",{class:"header-text"},[o("i",null," DarkSurf.ru ")],-1))]),o("div",_,[o("a",{href:"#",onClick:t[0]||(t[0]=V=>r.logOut())},t[3]||(t[3]=[o("img",{src:C},null,-1)]))])]),o("div",E,[o("div",null,[a(m),r.checkRole3(s.roleID)||r.checkRole2(s.roleID)?(l(),v(A,{key:0})):i("",!0)]),o("div",null,[a(p)])]),t[4]||(t[4]=o("div",null,null,-1))])):i("",!0)}const J=g(D,[["render",L],["__scopeId","data-v-0725bf8a"]]);export{J as default};
